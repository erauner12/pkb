<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-04-14 Tue 17:51 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Docker</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/font.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="../../styles/readtheorg/css/htmlize.css"/>
<script type="text/javascript" src="../../styles/readtheorg/js/jquery.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Docker</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org81a29b5">1. Links</a></li>
<li><a href="#orgb89a3da">2. Commands</a></li>
<li><a href="#orgaa2eb2a">3. Course Overview</a>
<ul>
<li><a href="#orgd6a7b47">3.1. Course Overview</a></li>
</ul>
</li>
<li><a href="#org3c0d22c">4. Course Introduction</a>
<ul>
<li><a href="#org9dda023">4.1. Introduction</a></li>
</ul>
</li>
<li><a href="#orgd1c9612">5. Installing Docker</a>
<ul>
<li><a href="#orge766f25">5.1. Module Intro</a></li>
<li><a href="#org50a13c0">5.2. Docker for Windows</a></li>
<li><a href="#org34525b9">5.3. Docker for Mac</a></li>
<li><a href="#orgd6ebc9d">5.4. Installing Docker on Windows Server 2016</a></li>
<li><a href="#org8d938d0">5.5. Installing Docker on Linux</a></li>
<li><a href="#org50bfb7c">5.6. Module Summary</a></li>
</ul>
</li>
<li><a href="#orga5cd6c5">6. Working with Containers</a>
<ul>
<li><a href="#orgd26d162">6.1. What Is a Container?</a></li>
<li><a href="#org9f2d8d1">6.2. The 'docker run' Command</a></li>
<li><a href="#orgc294aea">6.3. Theory of Pulling and Running Containers</a></li>
<li><a href="#org5df85aa">6.4. Working with Images</a></li>
<li><a href="#org6a9a007">6.5. Container Lifecycle</a>
<ul>
<li><a href="#orgeeecef4">6.5.1. vagrant config on workstation</a></li>
</ul>
</li>
<li><a href="#org416ad7f">6.6. back to container</a></li>
<li><a href="#orgeaefdef">6.7. Lesson Recap</a></li>
</ul>
</li>
<li><a href="#org3566f36">7. Swarm Mode and Microservices</a>
<ul>
<li><a href="#orgb42d492">7.1. Module Intro</a></li>
<li><a href="#org7f6f321">7.2. Swarm Mode Theory</a></li>
<li><a href="#org7b84145">7.3. Configuring Swarm Mode</a></li>
<li><a href="#org509bd03">7.4. Services</a></li>
<li><a href="#org9824c5a">7.5. Scaling Services</a></li>
<li><a href="#orgf879071">7.6. Rolling Updates</a></li>
<li><a href="#orgda27222">7.7. Stacks and DABs</a></li>
<li><a href="#org03bd953">7.8. Recap</a></li>
</ul>
</li>
<li><a href="#org0565ca7">8. What Next!</a>
<ul>
<li><a href="#orgb9a5629">8.1. Next Steps</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org81a29b5" class="outline-2">
<h2 id="org81a29b5"><span class="section-number-2">1</span> Links</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://app.pluralsight.com/library/courses/docker-getting-started/table-of-contents">https://app.pluralsight.com/library/courses/docker-getting-started/table-of-contents</a>
</p>
</div>
</div>



<div id="outline-container-orgb89a3da" class="outline-2">
<h2 id="orgb89a3da"><span class="section-number-2">2</span> Commands</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>starts a new container</label><pre class="src src-go">docker run
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>copies images to the docker ost</label><pre class="src src-go">docker pull
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>lists images on the docker host</label><pre class="src src-go">docker images
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>removes images from the docker host</label><pre class="src src-go">docker rmi
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>lists running containers</label><pre class="src src-go">docker ps
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>stops running containers</label><pre class="src src-go">docker stop
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>removes (deletes) stopped containers</label><pre class="src src-go">docker rm
</pre>
</div>
</div>
</div>


<div id="outline-container-orgaa2eb2a" class="outline-2">
<h2 id="orgaa2eb2a"><span class="section-number-2">3</span> Course Overview</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgd6a7b47" class="outline-3">
<h3 id="orgd6a7b47"><span class="section-number-3">3.1</span> Course Overview</h3>
</div>
</div>



<div id="outline-container-org3c0d22c" class="outline-2">
<h2 id="org3c0d22c"><span class="section-number-2">4</span> Course Introduction</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org9dda023" class="outline-3">
<h3 id="org9dda023"><span class="section-number-3">4.1</span> Introduction</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>



<ul class="org-ul">
<li>Docker and containers massive pasrt of the future of IT.

<ul class="org-ul">
<li>just finished the big picture</li>

<li>install docker</li>

<li>working with containers</li>

<li>working with apps</li>
</ul></li>

<li>kubernetes is a bigger deal but docker swarm is also on the map</li>
</ul>


<ul class="org-ul">
<li>quick refresher

<ul class="org-ul">
<li>modern day apps are made up of services

<ul class="org-ul">
<li>need an orchestration layer like kubernetes

<ul class="org-ul">
<li>going to see how to install it on various platforms</li>

<li>going to finish play finish and play around</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>


<div id="outline-container-orgd1c9612" class="outline-2">
<h2 id="orgd1c9612"><span class="section-number-2">5</span> Installing Docker</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orge766f25" class="outline-3">
<h3 id="orge766f25"><span class="section-number-3">5.1</span> Module Intro</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>you can isntall on various platforms

<ul class="org-ul">
<li>window</li>
<li>linux</li>
<li>mac</li>
</ul></li>

<li><ul class="org-ul">
<li>on prem</li>
<li>cloud</li>
<li>local</li>
</ul></li>
</ul>


<ul class="org-ul">
<li>This course will be doing docker on AWS</li>
</ul>
</div>
</div>


<div id="outline-container-org50a13c0" class="outline-3">
<h3 id="org50a13c0"><span class="section-number-3">5.2</span> Docker for Windows</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>Windows 10 64 bit only

<ul class="org-ul">
<li>install a docker</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org34525b9" class="outline-3">
<h3 id="org34525b9"><span class="section-number-3">5.3</span> Docker for Mac</h3>
</div>

<div id="outline-container-orgd6ebc9d" class="outline-3">
<h3 id="orgd6ebc9d"><span class="section-number-3">5.4</span> Installing Docker on Windows Server 2016</h3>
</div>

<div id="outline-container-org8d938d0" class="outline-3">
<h3 id="org8d938d0"><span class="section-number-3">5.5</span> Installing Docker on Linux</h3>
</div>
<div id="outline-container-org50bfb7c" class="outline-3">
<h3 id="org50bfb7c"><span class="section-number-3">5.6</span> Module Summary</h3>
</div>
</div>



<div id="outline-container-orga5cd6c5" class="outline-2">
<h2 id="orga5cd6c5"><span class="section-number-2">6</span> Working with Containers</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgd26d162" class="outline-3">
<h3 id="orgd26d162"><span class="section-number-3">6.1</span> What Is a Container?</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>virtual machine hypervisor

<ul class="org-ul">
<li><img src="file:///c:/erauner12.github.io/lab/Course/docker.org_20200413_235441_sv1w28.png" alt="docker.org_20200413_235441_sv1w28.png" /></li>
</ul></li>

<li>Docker
<ul class="org-ul">
<li><img src="file:///c:/erauner12.github.io/lab/Course/docker.org_20200413_235501_X2ksF7.png" alt="docker.org_20200413_235501_X2ksF7.png" /></li>
</ul></li>
</ul>
</div>
</div>


<div id="outline-container-org9f2d8d1" class="outline-3">
<h3 id="org9f2d8d1"><span class="section-number-3">6.2</span> The 'docker run' Command</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>docker version</label><pre class="src src-Shell">[vagrant@dropwizard ~]$ docker version

Client: Docker Engine - Community
 Version:           19.03.8
 API version:       1.40
 Go version:        go1.12.17
 Git commit:        afacb8b
 Built:             Wed Mar 11 01:27:04 2020
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.8
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.12.17
  Git commit:       afacb8b
  Built:            Wed Mar 11 01:25:42 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.2.13
  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429
 runc:
  Version:          1.0.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          0.18.0
</pre>
</div>



<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>We are creating a container below</label><pre class="src src-Shell">
[vagrant@dropwizard ~]$ docker run hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
1b930d010525: Pull complete
Digest: sha256:f9dfddf63636d84ef479d645ab5885156ae030f611a56f3a7ac7f2fdd86d7e4e
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

</pre>
</div>
<p>
h
</p>


<ul class="org-ul">
<li>all the container did was open up and say "Hello from Docker" It's no longer running. Will show you below
<ul class="org-ul">
<li>prints to screen then exits</li>
</ul></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>Not running</label><pre class="src src-ruby">[vagrant<span style="color: #a0522d;">@dropwizard</span> ~]$ docker ps
<span style="color: #228b22;">CONTAINER</span> <span style="color: #228b22;">ID</span>        <span style="color: #228b22;">IMAGE</span>               <span style="color: #228b22;">COMMAND</span>             <span style="color: #228b22;">CREATED</span>             <span style="color: #228b22;">STATUS</span>              <span style="color: #228b22;">PORTS</span>               <span style="color: #228b22;">NAMES</span>
</pre>
</div>

<ul class="org-ul">
<li>You can see that it was running at one point though below:</li>
</ul>

<div class="org-src-container">
<pre class="src src-Shell">[vagrant@dropwizard ~]$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMESe13c18cbdd12        hello-world         "/hello"            5 minutes ago       Exited (0) 5 minutes ago                       naughty_albattani
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>shows images that were local</label><pre class="src src-Shell">[vagrant@dropwizard ~]$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              fce289e99eb9        15 months ago       1.84kB

</pre>
</div>

<ul class="org-ul">
<li>Quick recap

<ul class="org-ul">
<li>Docker client and Docker Daemon on the same host

<ul class="org-ul">
<li>docker client made api calls to the talker daemon</li>

<li>docker says start me a container with a hello world image

<ul class="org-ul">
<li>went out to docker hub to get the image</li>
</ul></li>

<li>on premise registry is likely would cerner would have for their own applications

<ul class="org-ul">
<li>the docker daemon did not have it, then it pulled it and made a copy
<ul class="org-ul">
<li>at that point it created the container</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>


<div class="figure">
<p><img src="file:///c:/erauner12.github.io/lab/Course/docker.org_20200414_000936_a2z6Dc.png" alt="docker.org_20200414_000936_a2z6Dc.png" />
</p>
</div>
</div>
</div>











<div id="outline-container-orgc294aea" class="outline-3">
<h3 id="orgc294aea"><span class="section-number-3">6.3</span> Theory of Pulling and Running Containers</h3>
</div>

<div id="outline-container-org5df85aa" class="outline-3">
<h3 id="org5df85aa"><span class="section-number-3">6.4</span> Working with Images</h3>
<div class="outline-text-3" id="text-6-4">
<ul class="org-ul">
<li>images are just stopped containers</li>

<li>containers are just running images</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 13: </span>pulling latest apline image</label><pre class="src src-go">docker pull alpine
</pre>
</div>

<p>
<a href="https://hub.docker.com/_/ubuntu">https://hub.docker.com/_/ubuntu</a>
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 14: </span>pulling the lastest docker image</label><pre class="src src-go">docker pull ubuntu
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 15: </span>pull specific image</label><pre class="src src-go">docker pull ubuntu:14:04
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 16: </span>removes the docker image that you specify</label><pre class="src src-go">docker rmi ubuntu:14.04
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go">[vagrant@dropwizard ~]$ docker pull ubuntu
Using default tag: latest
latest: Pulling from library/ubuntu
5bed26d33875: Pull complete
f11b29a9c730: Pull complete
930bda195c84: Pull complete
78bf9a5ad49e: Pull complete
Digest: sha256:bec5a2727be7fff3d308193cfde3491f8fba1a2ba392b7546b43a051853a341d
Status: Downloaded newer image for ubuntu:latest
docker.io/library/ubuntu:latest
</pre>
</div>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 18: </span>here is how you see all your images</label><pre class="src src-go">[vagrant@dropwizard ~]$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              4e5021d210f6        3 weeks ago         64.2MB
hello-world         latest              fce289e99eb9        15 months ago       1.84kB
</pre>
</div>
</div>
</div>





<div id="outline-container-org6a9a007" class="outline-3">
<h3 id="org6a9a007"><span class="section-number-3">6.5</span> Container Lifecycle</h3>
<div class="outline-text-3" id="text-6-5">
<p>
lifecycle of a container is shortlived
</p>

<ul class="org-ul">
<li>when you create a container, it goes into a running state. You can stop and start it as much as you want</li>

<li>the only way to actually lose data is by removing the container like so</li>
</ul>

<div class="org-src-container">
<pre class="src src-go">docker rm &lt;container&gt;
</pre>
</div>

<ul class="org-ul">
<li>this is a second level image, not top level like before</li>
</ul>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 20: </span>start the container in detached mode (throw it in the background). also mapping some network ports (web server listening on port 80) map to port 8080 on the docker host</label><pre class="src src-go">docker run -d --name web -p 80:8080 nigelpoulton/pluralsight-docker-ci

[vagrant@dropwizard ~]$ docker run -d --name web -p 80:8080 nigelpoulton/pluralsight-docker-ci
Unable to find image 'nigelpoulton/pluralsight-docker-ci:latest' locally
latest: Pulling from nigelpoulton/pluralsight-docker-ci
729ec3a6ada3: Pull complete
f0a3eea3dca0: Pull complete
e07851c50ad6: Pull complete
f78e7cd1f8dc: Pull complete
7cad1fbd2f07: Pull complete
22835c51693f: Pull complete
Digest: sha256:61bc64850a5f2bfbc65967cc33feaae8a77c8b49379c55aaf05bb02dcee41451
Status: Downloaded newer image for nigelpoulton/pluralsight-docker-ci:latest
41fa6d0761b4e1966ba32228cf54b3700765ffd01c1b08ed521f35c7d6054584
</pre>
</div>
</div>


<div id="outline-container-orgeeecef4" class="outline-4">
<h4 id="orgeeecef4"><span class="section-number-4">6.5.1</span> vagrant config on workstation</h4>
<div class="outline-text-4" id="text-6-5-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 21: </span>add the following to docker vagrant file</label><pre class="src src-go">config.vm.network "forwarded_port", guest: 80, host: 80
config.vm.network "public_network"
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 22: </span></label><pre class="src src-go">vagrant reload
vagrant ssh
docker start web
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 23: </span>get the ip address of the docker host</label><pre class="src src-go">[vagrant@dropwizard ~]$ ifconfig
docker0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
	inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255
	inet6 fe80::42:33ff:feae:e38  prefixlen 64  scopeid 0x20&lt;link&gt;
	ether 02:42:33:ae:0e:38  txqueuelen 0  (Ethernet)
	RX packets 0  bytes 0 (0.0 B)
	RX errors 0  dropped 0  overruns 0  frame 0
	TX packets 8  bytes 656 (656.0 B)
	TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
	inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
	inet6 fe80::a00:27ff:fe5a:e9e7  prefixlen 64  scopeid 0x20&lt;link&gt;
	ether 08:00:27:5a:e9:e7  txqueuelen 1000  (Ethernet)
	RX packets 586  bytes 68059 (66.4 KiB)
	RX errors 0  dropped 0  overruns 0  frame 0
	TX packets 411  bytes 72841 (71.1 KiB)
	TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s8: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
	inet 192.168.1.228  netmask 255.255.255.0  broadcast 192.168.1.255
</pre>
</div>

<ul class="org-ul">
<li>in this case it is 192.168.1.228</li>
</ul>

<p>
<a href="http://192.168.1.228">http://192.168.1.228</a>
</p>

<p>
you should get your page
</p>
</div>
</div>
</div>











<div id="outline-container-org416ad7f" class="outline-3">
<h3 id="org416ad7f"><span class="section-number-3">6.6</span> back to container</h3>
<div class="outline-text-3" id="text-6-6">
<ul class="org-ul">
<li>let's log in to the container and look inside</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 24: </span>in the bash shell of the container we just created</label><pre class="src src-go">docker run -it --name temp ubuntu:latest /bin/bash
</pre>
</div>

<ul class="org-ul">
<li>you will not be able to do much in here like ping google.com or even vi into /etc/hosts

<ul class="org-ul">
<li>that is because it is extremely barebones. not meant to do much else

<ul class="org-ul">
<li>ps and top are even just temporary processes that usually do not run</li>
</ul></li>
</ul></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 25: </span>here is some output to show you how little it is doing</label><pre class="src src-go">top - 22:34:04 up 15 min,  0 users,  load average: 0.00, 0.02, 0.05
Tasks:   2 total,   1 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem :   756608 total,   125788 free,   270632 used,   360188 buff/cache
KiB Swap:  2097148 total,  2096884 free,      264 used.   362928 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
    1 root      20   0   18496   2040   1636 S   0.0  0.3   0:00.01 bash
   11 root      20   0   36616   1780   1328 R   0.0  0.2   0:00.00 top

ctrl + p + q to exit
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 26: </span>the following commands will stop all containers, remove them, and then remove the images they were using</label><pre class="src src-go">[vagrant@dropwizard ~]$ docker stop $(docker ps -aq)
130dac25ee36
ebe6db2d5dc8
41fa6d0761b4
e13c18cbdd12
[vagrant@dropwizard ~]$ docker rm $(docker ps -aq)
130dac25ee36
ebe6db2d5dc8
41fa6d0761b4
e13c18cbdd12
[vagrant@dropwizard ~]$ docker rmi $(docker images -q)
Untagged: ubuntu:latest
Untagged: ubuntu@sha256:bec5a2727be7fff3d308193cfde3491f8fba1a2ba392b7546b43a051853a341d
Deleted: sha256:4e5021d210f65ebe915670c7089120120bc0a303b90208592851708c1b8c04bd
Deleted: sha256:1d9112746e9d86157c23e426ce87cc2d7bced0ba2ec8ddbdfbcc3093e0769472
Deleted: sha256:efcf4a93c18b5d01aa8e10a2e3b7e2b2eef0378336456d8653e2d123d6232c1e
Deleted: sha256:1e1aa31289fdca521c403edd6b37317bf0a349a941c7f19b6d9d311f59347502
Deleted: sha256:c8be1b8f4d60d99c281fc2db75e0f56df42a83ad2f0b091621ce19357e19d853
Untagged: nigelpoulton/pluralsight-docker-ci:latest
Untagged: nigelpoulton/pluralsight-docker-ci@sha256:61bc64850a5f2bfbc65967cc33feaae8a77c8b49379c55aaf05bb02dcee41451
Deleted: sha256:dd7a37fe7c1e6f3b9bcd1c51cad0a54fde3f393ac458af3b009b2032978f599d
Deleted: sha256:62c2dc8575cf79fddcbf8466311d893100d89d8fe30532cd8949a6399bf0c59e
Deleted: sha256:41d87f201eb33b39af235cb7aae8dce404407dbff9654886854ef076fedec0ed
Deleted: sha256:fec1957285f8b705269c691bd78a70584888e4a7674a7f3e74351f131926edcf
Deleted: sha256:27a18cba123036ad9cedaeed9dc75d3a55c81bf2da5c21837a2f23583882aee4
Deleted: sha256:937d6f78d3ffb0b5bd95a1e8a39974008915ac044f7c7c89a18962efe973ca81
Deleted: sha256:9e607bb861a7d58bece26dd2c02874beedd6a097c1b6eca5255d5eb0d2236983
Untagged: hello-world:latest
Untagged: hello-world@sha256:f9dfddf63636d84ef479d645ab5885156ae030f611a56f3a7ac7f2fdd86d7e4e
Deleted: sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e
Deleted: sha256:af0b15c8625bb1938f1d7b17081031f649fd14e6b233688eea3c5483994a66a3
</pre>
</div>
</div>
</div>


<div id="outline-container-orgeaefdef" class="outline-3">
<h3 id="orgeaefdef"><span class="section-number-3">6.7</span> Lesson Recap</h3>
<div class="outline-text-3" id="text-6-7">
<ul class="org-ul">
<li>docker run is just a client command

<ul class="org-ul">
<li><img src="file:///c:/erauner12.github.io/lab/Course/docker.org_20200414_174308_6t4bIJ.png" alt="docker.org_20200414_174308_6t4bIJ.png" /></li>
</ul></li>

<li>docker is just talking to the daemon which is doing all the heavy lfiting through the docker api</li>
</ul>


<ul class="org-ul">
<li>here are the commands we learned</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 27: </span>starts a new container</label><pre class="src src-go">docker run
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 28: </span>copies images to the docker ost</label><pre class="src src-go">docker pull
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 29: </span>lists images on the docker host</label><pre class="src src-go">docker images
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 30: </span>removes images from the docker host</label><pre class="src src-go">docker rmi
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 31: </span>lists running containers</label><pre class="src src-go">docker ps
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 32: </span>stops running containers</label><pre class="src src-go">docker stop
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 33: </span>removes (deletes) stopped containers</label><pre class="src src-go">docker rm
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3566f36" class="outline-2">
<h2 id="org3566f36"><span class="section-number-2">7</span> Swarm Mode and Microservices</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orgb42d492" class="outline-3">
<h3 id="orgb42d492"><span class="section-number-3">7.1</span> Module Intro</h3>
</div>

<div id="outline-container-org7f6f321" class="outline-3">
<h3 id="org7f6f321"><span class="section-number-3">7.2</span> Swarm Mode Theory</h3>
</div>

<div id="outline-container-org7b84145" class="outline-3">
<h3 id="org7b84145"><span class="section-number-3">7.3</span> Configuring Swarm Mode</h3>
</div>

<div id="outline-container-org509bd03" class="outline-3">
<h3 id="org509bd03"><span class="section-number-3">7.4</span> Services</h3>
</div>

<div id="outline-container-org9824c5a" class="outline-3">
<h3 id="org9824c5a"><span class="section-number-3">7.5</span> Scaling Services</h3>
</div>

<div id="outline-container-orgf879071" class="outline-3">
<h3 id="orgf879071"><span class="section-number-3">7.6</span> Rolling Updates</h3>
</div>

<div id="outline-container-orgda27222" class="outline-3">
<h3 id="orgda27222"><span class="section-number-3">7.7</span> Stacks and DABs</h3>
</div>

<div id="outline-container-org03bd953" class="outline-3">
<h3 id="org03bd953"><span class="section-number-3">7.8</span> Recap</h3>
</div>
</div>


<div id="outline-container-org0565ca7" class="outline-2">
<h2 id="org0565ca7"><span class="section-number-2">8</span> What Next!</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orgb9a5629" class="outline-3">
<h3 id="orgb9a5629"><span class="section-number-3">8.1</span> Next Steps</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2020-04-14 Tue 17:51</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
